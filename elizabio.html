<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <script>window.sheetCsvUrl = "https://docs.google.com/spreadsheets/d/1iAi73leePAUecgtVYqUneI64RleFUV68N0gRVPJ5kus/export?format=csv&gid=539268331";</script>
  <script src="access_sheets.js" defer></script>
  <link href="https://fonts.googleapis.com/css2?family=Rakkas&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Platypi&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <title>elizabio</title>
</head>


<body>

  <div class="swipe"></div>

<div>
  <h1 style="color: #ec3ca2">ELIZA</h1>
  <h1></h1>Biological/Natural Ending</h1><br><br>
</div>

<div id="chart" class="pie"
     role="img"
     style="
       --size:180px;
       --inner:48%;
       /* colors (your palette, same order as your gradient) */
       --c1:#b53410; --c2:#ec3ca2; --c3:#5794e3; --c4:#5544b1; --c5:#564750;
       --c6:#5a9843; --c7:#b6d468; --c8:#bfbfbf; --c9:#fc8210; --c10:#ad3cc4;
       /* cumulative stops (must be increasing, final should be 100%) */
       --s1: 0%; --s2: 0%; --s3: 0%; --s4: 0%; --s5: 0%;
       --s6: 0%; --s7: 0%; --s8: 0%; --s9: 0%; --s10: 100%;
       ">
  <span class="pie__center">    <p><span data-cell="I2"></span>%</p>
</span>
</div>

<!--temp storage-->
<div id="sheet-values" hidden>
   <span data-cell="I29"></span>
   <span data-cell="I2"></span>
   <span data-cell="I5"></span>
   <span data-cell="I8"></span>
   <span data-cell="I11"></span>
   <span data-cell="I14"></span>
   <span data-cell="I17"></span>
   <span data-cell="I20"></span>
   <span data-cell="I23"></span>
   <span data-cell="I26"></span>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const pie = document.getElementById("chart");
  const spans = Array.from(document.querySelectorAll("#sheet-values [data-cell]"));
  // Parse and round values
  const values = spans.map(s => {
    const n = parseFloat(s.textContent);
    const val = Number.isFinite(n) ? Math.round(n * 10) / 10 : 0;
    s.textContent = val; // optional: overwrite span with rounded value
    return val;
  });
  // Compute cumulative stops
  let cumulative = 0;
  pie.style.setProperty("--s1", "0%"); // force first slice start at 0
  values.forEach((v, i) => {
    cumulative += v;
    pie.style.setProperty(`--s${i+1}`, cumulative + "%");  // <-- FIX: parenthesis not backtick
  });
  // Ensure last stop is exactly 100%
  pie.style.setProperty("--s10", "100%");
  // Optional: update center text with a chosen slice
  const centerSpan = pie.querySelector(".pie__center [data-cell]");
  if(centerSpan){
    centerSpan.textContent = values[1]; // example: show I2 value
  }
  
  // Debug logging
  console.log("Values:", values);
  for (let i = 1; i <= 10; i++) {
    console.log(`--s${i}:`, pie.style.getPropertyValue(`--s${i}`));
  }
});
</script>
<!--<script>
document.addEventListener("DOMContentLoaded", () => {
  const pie = document.getElementById("chart");
  // Collect all sheet values in order
  const spans = document.querySelectorAll('#sheet-values [data-cell]');
  let cumulative = 0;
  spans.forEach((span, i) => {
    const value = parseFloat(span.textContent) || 0;
    cumulative += value;
    // --s1, --s2, --s3 â€¦ etc
    pie.style.setProperty(`--s${i + 1}`, cumulative + "%");
  });
  // Safety: ensure final stop is 100%
  pie.style.setProperty("--s10", "100%");
});
</script>-->
<!--whatever comes after the pie chart this way-->
  <p>Ending text.</p>

  <br>
  <br>
  <br>
  <a href="index.html" class="button">HOME</a>
  <br>
  <br>
</body>
</html>
